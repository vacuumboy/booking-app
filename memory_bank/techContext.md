# Технический контекст проекта

## Архитектура проекта

Booking App построен на основе фреймворка Laravel, который следует архитектурному паттерну MVC (Model-View-Controller):

- **Models**: Представляют данные и бизнес-логику приложения
- **Views**: Отвечают за отображение данных пользователю (Blade шаблоны)
- **Controllers**: Обрабатывают запросы пользователя и взаимодействуют с моделями и представлениями

## Основные модели данных

1. **User**
   - Представляет пользователя системы (мастера или салон)
   - Содержит информацию для аутентификации и профиль пользователя
   - Имеет тип пользователя (`user_type`): master или salon

2. **Client**
   - Представляет клиента мастера или салона
   - Содержит контактную информацию клиента
   - Привязан к конкретному пользователю (`user_id`)

3. **Service**
   - Представляет услугу, которую предоставляет мастер или салон
   - Содержит информацию о цене, длительности и категории услуги
   - Привязан к конкретному пользователю (`user_id`)

4. **Master**
   - Представляет мастера (может быть связан с пользователем или салоном)
   - Содержит информацию о мастере и его специализации
   - Может быть привязан к салону (`salon_id`)

5. **Schedule**
   - Представляет рабочее расписание мастера
   - Содержит информацию о рабочих часах и выходных днях
   - Привязан к конкретному пользователю (`user_id`)

6. **Appointment**
   - Представляет запись клиента к мастеру
   - Содержит информацию о времени, услуге и статусе записи
   - Связывает клиента, мастера и услугу

## Основные контроллеры

1. **Auth контроллеры**
   - Отвечают за аутентификацию и регистрацию пользователей
   - Используют стандартные возможности Laravel Breeze

2. **ProfileController**
   - Управляет профилем пользователя
   - Позволяет обновлять личную и профессиональную информацию

3. **ClientController**
   - Управляет клиентской базой пользователя
   - Реализует CRUD операции для клиентов

4. **ServiceController**
   - Управляет услугами пользователя
   - Реализует CRUD операции для услуг

5. **ScheduleController**
   - Управляет рабочим расписанием мастера
   - Позволяет создавать и редактировать рабочие часы

6. **SalonMastersController** и **SalonScheduleController**
   - Управляют мастерами и их расписанием в салоне
   - Доступны только для пользователей типа "салон"

7. **AppointmentController**
   - Управляет записями клиентов
   - Проверяет доступность времени и создает записи

8. **CalendarController**
   - Отображает календарь записей
   - Предоставляет интерфейс для просмотра и создания записей

## Маршрутизация

Маршруты определены в файлах:
- `routes/web.php` - основные веб-маршруты
- `routes/auth.php` - маршруты для аутентификации

## Аутентификация и авторизация

- Используется Laravel Breeze для аутентификации
- Реализованы политики доступа для ограничения доступа к ресурсам
- Проверки авторизации в контроллерах для защиты данных пользователей

## Валидация данных

- Используются Request классы для валидации входных данных
- Реализованы правила валидации для всех форм
- Кастомные сообщения об ошибках на русском языке

## Особенности реализации

- Мультиарендная архитектура: данные разных пользователей изолированы
- Использование scopes в моделях для фильтрации данных по пользователю
- Soft deletes для безопасного удаления данных 